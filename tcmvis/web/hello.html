<!DOCTYPE html>
<html>
    
    
    <script type="text/javascript" src="/eel.js"></script>
    <script>
    var dotid=[
    {
        "herb": "人参",
        "id": "1"
    },
    {
        "herb": "白术",
        "id": "2"
    },
    {
        "herb": "茯苓",
        "id": "3"
    },
    {
        "herb": "甘草",
        "id": "4"
    },
    {
        "herb": "薏苡仁",
        "id": "5"
    },
    {
        "herb": "桔梗",
        "id": "6"
    },
    {
        "herb": "白扁豆",
        "id": "7"
    },
    {
        "herb": "山药",
        "id": "8"
    },
    {
        "herb": "大枣",
        "id": "9"
    },
    {
        "herb": "黄芪",
        "id": "10"
    },
    {
        "herb": "炙甘草",
        "id": "11"
    },
    {
        "herb": "当归",
        "id": "12"
    },
    {
        "herb": "陈皮",
        "id": "13"
    },
    {
        "herb": "升麻",
        "id": "14"
    },
    {
        "herb": "柴胡",
        "id": "15"
    },
    {
        "herb": "防风",
        "id": "16"
    },
    {
        "herb": "麦冬",
        "id": "17"
    },
    {
        "herb": "五味子",
        "id": "18"
    },
    {
        "herb": "白芍",
        "id": "19"
    },
    {
        "herb": "车前子",
        "id": "20"
    },
    {
        "herb": "苍术",
        "id": "21"
    },
    {
        "herb": "熟地黄",
        "id": "22"
    },
    {
        "herb": "生姜",
        "id": "23"
    },
    {
        "herb": "桂枝",
        "id": "24"
    },
    {
        "herb": "阿胶",
        "id": "25"
    },
    {
        "herb": "火麻仁",
        "id": "26"
    },
    {
        "herb": "泽泻",
        "id": "27"
    },
    {
        "herb": "牡丹皮",
        "id": "28"
    },
    {
        "herb": "枸杞子",
        "id": "29"
    },
    {
        "herb": "菟丝子",
        "id": "30"
    },
    {
        "herb": "鹿角胶",
        "id": "31"
    },
    {
        "herb": "牛膝",
        "id": "32"
    },
    {
        "herb": "黄柏",
        "id": "33"
    },
    {
        "herb": "知母",
        "id": "34"
    },
    {
        "herb": "北沙参",
        "id": "35"
    },
    {
        "herb": "川楝子",
        "id": "36"
    },
    {
        "herb": "山茱萸",
        "id": "37"
    },
    {
        "herb": "附子",
        "id": "38"
    },
    {
        "herb": "肉桂",
        "id": "39"
    },
    {
        "herb": "杜仲",
        "id": "40"
    },
    {
        "herb": "肉苁蓉",
        "id": "41"
    },
    {
        "herb": "巴戟天",
        "id": "42"
    },
    {
        "herb": "石斛",
        "id": "43"
    },
    {
        "herb": "薄荷",
        "id": "44"
    },
    {
        "herb": "莲子",
        "id": "45"
    },
    {
        "herb": "砂仁",
        "id": "46"
    },
    {
        "herb": "荆芥炭",
        "id": "47"
    },
    {
        "herb": "地黄",
        "id": "48"
    },
    {
        "herb": "龟甲胶",
        "id": "49"
    },
    {
        "herb": "龟甲",
        "id": "50"
    },
    {
        "herb": "石菖蒲",
        "id": "51"
    },
    {
        "herb": "何首乌",
        "id": "52"
    },
    {
        "herb": "补骨脂",
        "id": "53"
    },
    {
        "herb": "龙眼肉",
        "id": "54"
    },
    {
        "herb": "酸枣仁",
        "id": "55"
    },
    {
        "herb": "木香",
        "id": "56"
    },
    {
        "herb": "远志",
        "id": "57"
    },
    {
        "herb": "川芎",
        "id": "58"
    }
]
    var myfjdata=[{"herb": "人参", "xx": "-2.968632936", "yy": "0.178786859"}, {"herb": "白术", "xx": "-3.140700817", "yy": "0.942083657"}, {"herb": "茯苓", "xx": "-4.655617714", "yy": "-1.043939829"}, {"herb": "甘草", "xx": "-4.523247719", "yy": "-0.609639764"}, {"herb": "薏苡仁", "xx": "-4.429934025", "yy": "-0.079158716"}, {"herb": "桔梗", "xx": "-1.504244208", "yy": "-0.00548108"}, {"herb": "白扁豆", "xx": "-3.824779987", "yy": "0.357004225"}, {"herb": "山药", "xx": "-4.528208733", "yy": "-1.387471557"}, {"herb": "大枣", "xx": "-3.906730175", "yy": "-0.022498643"}, {"herb": "黄芪", "xx": "-3.413937092", "yy": "0.252200156"}, {"herb": "炙甘草", "xx": "-4.269578934", "yy": "-0.515816808"}, {"herb": "当归", "xx": "-3.238331079", "yy": "-0.787130058"}, {"herb": "陈皮", "xx": "-1.886649609", "yy": "0.680230796"}, {"herb": "升麻", "xx": "-3.309570789", "yy": "-1.132460117"}, {"herb": "柴胡", "xx": "-1.373338819", "yy": "-1.060228109"}, {"herb": "防风", "xx": "-2.883019924", "yy": "-0.620351553"}, {"herb": "麦冬", "xx": "-2.77603507", "yy": "-1.917709827"}, {"herb": "五味子", "xx": "-2.738422632", "yy": "-0.071033478"}, {"herb": "白芍", "xx": "-1.581794739", "yy": "-2.248958111"}, {"herb": "车前子", "xx": "-2.987339973", "yy": "-3.009689093"}, {"herb": "苍术", "xx": "-2.257733583", "yy": "1.252760172"}, {"herb": "熟地黄", "xx": "-2.261112452", "yy": "-3.802080393"}, {"herb": "生姜", "xx": "-2.423458576", "yy": "1.586563945"}, {"herb": "桂枝", "xx": "-3.002579689", "yy": "-0.276521504"}, {"herb": "阿胶", "xx": "-3.841306448", "yy": "-3.153040886"}, {"herb": "火麻仁", "xx": "-4.049615383", "yy": "-0.543394983"}, {"herb": "泽泻", "xx": "-2.297468424", "yy": "-3.011219263"}, {"herb": "牡丹皮", "xx": "-1.513089895", "yy": "-2.76542902"}, {"herb": "枸杞子", "xx": "-3.865788221", "yy": "-3.743286133"}, {"herb": "菟丝子", "xx": "-4.109154224", "yy": "-2.61918664"}, {"herb": "鹿角胶", "xx": "-2.597402573", "yy": "-4.429816246"}, {"herb": "牛膝", "xx": "-3.590692997", "yy": "-3.355566978"}, {"herb": "黄柏", "xx": "-2.100105047", "yy": "-2.541544199"}, {"herb": "知母", "xx": "-2.701319695", "yy": "-2.368893623"}, {"herb": "北沙参", "xx": "-2.664515972", "yy": "-1.804931641"}, {"herb": "川楝子", "xx": "-1.91862309", "yy": "-2.582026482"}, {"herb": "山茱萸", "xx": "-1.977849483", "yy": "-4.042625904"}, {"herb": "附子", "xx": "-3.960914612", "yy": "-1.899103045"}, {"herb": "肉桂", "xx": "-3.765055656", "yy": "-2.320254803"}, {"herb": "杜仲", "xx": "-2.559403658", "yy": "-3.592699766"}, {"herb": "肉苁蓉", "xx": "-2.753558159", "yy": "-4.271862507"}, {"herb": "巴戟天", "xx": "-2.083695889", "yy": "-3.465502024"}, {"herb": "石斛", "xx": "-2.545398951", "yy": "-2.752537489"}, {"herb": "薄荷", "xx": "-1.41849494", "yy": "-0.615175426"}, {"herb": "莲子", "xx": "-4.61407423", "yy": "-1.565720201"}, {"herb": "砂仁", "xx": "-2.168384314", "yy": "1.319137931"}, {"herb": "荆芥炭", "xx": "-1.60704124", "yy": "-0.711083055"}, {"herb": "地黄", "xx": "-2.97184515", "yy": "-3.365247965"}, {"herb": "龟甲胶", "xx": "-3.198005676", "yy": "-4.076366901"}, {"herb": "龟甲", "xx": "-3.057582855", "yy": "-3.728332996"}, {"herb": "石菖蒲", "xx": "-2.354230642", "yy": "0.802957475"}, {"herb": "何首乌", "xx": "-2.4959867", "yy": "-3.973608017"}, {"herb": "补骨脂", "xx": "-2.003940582", "yy": "0.899944186"}, {"herb": "龙眼肉", "xx": "-3.425074339", "yy": "-0.160854667"}, {"herb": "酸枣仁", "xx": "-3.735731125", "yy": "-3.632935047"}, {"herb": "木香", "xx": "-2.563746929", "yy": "1.226793647"}, {"herb": "远志", "xx": "-2.309523344", "yy": "0.324441075"}, {"herb": "川芎", "xx": "-1.73198545", "yy": "-1.045446277"}]
    var allxx=[-2.968632936,-3.140700817,-4.655617714,-4.523247719,-4.429934025,-1.504244208,-3.824779987,-4.528208733,-3.906730175,-3.413937092,-4.269578934,-3.238331079,-1.886649609,-3.309570789,-1.373338819,-2.883019924,-2.77603507,-2.738422632,-1.581794739,-2.987339973,-2.257733583,-2.261112452,-2.423458576,-3.002579689,-3.841306448,-4.049615383,-2.297468424,-1.513089895,-3.865788221,-4.109154224,-2.597402573,-3.590692997,-2.100105047,-2.701319695,-2.664515972,-1.91862309,-1.977849483,-3.960914612,-3.765055656,-2.559403658,-2.753558159,-2.083695889,-2.545398951,-1.41849494,-4.61407423,-2.168384314,-1.60704124,-2.97184515,-3.198005676,-3.057582855,-2.354230642,-2.4959867,-2.003940582,-3.425074339,-3.735731125,-2.563746929,-2.309523344,-1.73198545]
    var allyy=[0.178786859,0.942083657,-1.043939829,-0.609639764,-0.079158716,-0.00548108,0.357004225,-1.387471557,-0.022498643,0.252200156,-0.515816808,-0.787130058,0.680230796,-1.132460117,-1.060228109,-0.620351553,-1.917709827,-0.071033478,-2.248958111,-3.009689093,1.252760172,-3.802080393,1.586563945,-0.276521504,-3.153040886,-0.543394983,-3.011219263,-2.76542902,-3.743286133,-2.61918664,-4.429816246,-3.355566978,-2.541544199,-2.368893623,-1.804931641,-2.582026482,-4.042625904,-1.899103045,-2.320254803,-3.592699766,-4.271862507,-3.465502024,-2.752537489,-0.615175426,-1.565720201,1.319137931,-0.711083055,-3.365247965,-4.076366901,-3.728332996,0.802957475,-3.973608017,0.899944186,-0.160854667,-3.632935047,1.226793647,0.324441075,-1.045446277]
    function bubbleSort(arr) {
          if (Array.isArray(arr)) {
            for (var i = arr.length - 1; i > 0; i--) {
              for (var j = 0; j < i; j++) {
                if (arr[j] > arr[j + 1]) {
                  [arr[j], arr[j + 1]] = [arr[j + 1], arr[j]];
                }
              }
            }
            return arr;
          }
     }
    
    console.log(allxx)
    function clearFunction() {
     d3.select("#svg001")
        .attr("id","svg000")
    }
    function realclearFunction() {
     d3.select("#svg000")
        .attr("id","svg001")
    }
    function myFunction() {
        var bacxx=[-2.968632936,-3.140700817,-4.655617714,-4.523247719,-4.429934025,-1.504244208,-3.824779987,-4.528208733,-3.906730175,-3.413937092,-4.269578934,-3.238331079,-1.886649609,-3.309570789,-1.373338819,-2.883019924,-2.77603507,-2.738422632,-1.581794739,-2.987339973,-2.257733583,-2.261112452,-2.423458576,-3.002579689,-3.841306448,-4.049615383,-2.297468424,-1.513089895,-3.865788221,-4.109154224,-2.597402573,-3.590692997,-2.100105047,-2.701319695,-2.664515972,-1.91862309,-1.977849483,-3.960914612,-3.765055656,-2.559403658,-2.753558159,-2.083695889,-2.545398951,-1.41849494,-4.61407423,-2.168384314,-1.60704124,-2.97184515,-3.198005676,-3.057582855,-2.354230642,-2.4959867,-2.003940582,-3.425074339,-3.735731125,-2.563746929,-2.309523344,-1.73198545]
        var bacyy=[0.178786859,0.942083657,-1.043939829,-0.609639764,-0.079158716,-0.00548108,0.357004225,-1.387471557,-0.022498643,0.252200156,-0.515816808,-0.787130058,0.680230796,-1.132460117,-1.060228109,-0.620351553,-1.917709827,-0.071033478,-2.248958111,-3.009689093,1.252760172,-3.802080393,1.586563945,-0.276521504,-3.153040886,-0.543394983,-3.011219263,-2.76542902,-3.743286133,-2.61918664,-4.429816246,-3.355566978,-2.541544199,-2.368893623,-1.804931641,-2.582026482,-4.042625904,-1.899103045,-2.320254803,-3.592699766,-4.271862507,-3.465502024,-2.752537489,-0.615175426,-1.565720201,1.319137931,-0.711083055,-3.365247965,-4.076366901,-3.728332996,0.802957475,-3.973608017,0.899944186,-0.160854667,-3.632935047,1.226793647,0.324441075,-1.045446277]
      var liverobj = document.getElementById("liverSelect");
      var liverindex = liverobj.selectedIndex; //选中索引
      var livertext = liverobj.options[liverindex].text; //选中文本
      var liverval = liverobj.options[liverindex].value; //选中值
        console.log(liverindex)
        // console.log(livertext)
        // console.log(liverval)
        var heartobj = document.getElementById("heartSelect");
      var heartindex = heartobj.selectedIndex; //选中索引
        var spleenobj = document.getElementById("spleenSelect");
      var spleenindex = spleenobj.selectedIndex; //选中索引
        var lungobj = document.getElementById("lungSelect");
      var lungindex =lungobj.selectedIndex; //选中索引
        var kidneyobj = document.getElementById("kidneySelect");
      var kidneyindex = kidneyobj.selectedIndex; //选中索引
        console.log(heartindex)
        console.log(spleenindex)
        console.log(lungindex)
        console.log(kidneyindex)
        wuxingindex=[liverindex,heartindex,spleenindex,lungindex,kidneyindex]
        oriwuxingindex=[liverindex,heartindex,spleenindex,lungindex,kidneyindex]
        wuxingindex=bubbleSort(wuxingindex)
        console.log(wuxingindex)
        console.log(oriwuxingindex)
        xxx=[myfjdata[liverindex].xx,myfjdata[heartindex].xx,myfjdata[spleenindex].xx,myfjdata[lungindex].xx,myfjdata[kidneyindex].xx]
        yyy=[myfjdata[liverindex].yy,myfjdata[heartindex].yy,myfjdata[spleenindex].yy,myfjdata[lungindex].yy,myfjdata[kidneyindex].yy]
        console.log(xxx)
        ori=[oriwuxingindex.indexOf(wuxingindex[0]),oriwuxingindex.indexOf(wuxingindex[1]),oriwuxingindex.indexOf(wuxingindex[2]),oriwuxingindex.indexOf(wuxingindex[3]),oriwuxingindex.indexOf(wuxingindex[4])]
        console.log(ori)
        console.log(yyy)
        xxx=xxx.map(Number)
        yyy=yyy.map(Number)
    
    for (var i=0;i<5;i++)
    { 
        bacxx.splice(bacxx.indexOf(xxx[i]), 1)
        bacyy.splice(bacyy.indexOf(yyy[i]), 1)
    }
    
    console.log(bacxx)
    console.log(bacyy)
    eel.rgb2rgbbyj(xxx,yyy,bacxx,bacyy,wuxingindex,ori)
     }
    </script>
    
    


  <head>
    <meta charset="UTF-8">
    <title>icafe咖啡馆</title>	
    <link rel="stylesheet" href="css/style.css" />
  </head>
  <body>
  
  
  
  <div id="container">
   
    <div id="header">
      <p>	<img src="images/headword3.png"></p>
    </div>
    
    <div id="nav">
          <p>
        <a href="#">方剂分析</a>
        <a href="hello.html">补益剂</a>
        <a href="hello2.html">清热剂 </a>|
        <a href="demo.html">病案分析</a>
      </p>
    </div>
  <div id="select">
    <p>
    肝：
    <select name="liver" id="liverSelect">
      <option value="a">人参</option>
      <option value="b">白术</option>
      <option value="c" >茯苓</option>
      <option value="d">甘草</option>
      <option value="e">薏苡仁</option>
        <option value="b">桔梗</option>
      <option value="c" >白扁豆</option>
      <option value="d">山药</option>
      <option value="e">大枣</option>
      <option value="c" >黄芪</option>
      <option value="d">炙甘草</option>
      <option value="e">当归</option>
      <option value="c" >陈皮</option>
      <option value="d">升麻</option>
      <option value="e">柴胡</option>
      <option value="c" >防风</option>
      <option value="d">麦冬</option>
      <option value="e">五味子</option>
        <option value="b"  selected="selected">白芍</option>
      <option value="c" >车前子</option>
      <option value="d">苍术</option>
      <option value="e">熟地黄</option>
        <option value="b">生姜</option>
        <option value="b">桂枝</option>
      <option value="c" >阿胶</option>
      <option value="d">火麻仁</option>
      <option value="e">泽泻</option>
      <option value="c" >牡丹皮</option>
      <option value="d">枸杞子</option>
      <option value="e">菟丝子</option>
      <option value="c" >鹿角胶</option>
      <option value="d">牛膝</option>
      <option value="e">黄柏</option>
      <option value="c" >知母</option>
      <option value="d">北沙参</option>
      <option value="e">川楝子</option>
        <option value="e">山茱萸</option>
        <option value="d">附子</option>
      <option value="e">肉桂</option>
        <option value="b">杜仲</option>
      <option value="c" >肉苁蓉</option>
      <option value="d">巴戟天</option>
      <option value="e">石斛</option>
        <option value="b">薄荷</option>
      <option value="c" >莲子</option>
      <option value="d">砂仁</option>
      <option value="e">荆芥炭</option>
      <option value="c" >地黄</option>
      <option value="d">龟甲胶</option>
      <option value="e">龟甲</option>
      <option value="c" >石菖蒲</option>
      <option value="d">何首乌</option>
      <option value="e">补骨脂</option>
      <option value="c" >龙眼肉</option>
      <option value="d">酸枣仁</option>
      <option value="e">木香</option>
        <option value="d">远志</option>
      <option value="e">川芎</option>
    </select> 
    心：
    <select name="liver" id="heartSelect">
      <option value="a" >人参</option>
      <option value="b">白术</option>
      <option value="c" >茯苓</option>
      <option value="d">甘草</option>
      <option value="e">薏苡仁</option>
        <option value="b">桔梗</option>
      <option value="c" >白扁豆</option>
      <option value="d">山药</option>
      <option value="e">大枣</option>
      <option value="c" >黄芪</option>
      <option value="d">炙甘草</option>
      <option value="e" selected="selected">当归</option>
      <option value="c" >陈皮</option>
      <option value="d">升麻</option>
      <option value="e">柴胡</option>
      <option value="c" >防风</option>
      <option value="d">麦冬</option>
      <option value="e">五味子</option>
        <option value="b">白芍</option>
      <option value="c" >车前子</option>
      <option value="d">苍术</option>
      <option value="e">熟地黄</option>
        <option value="b">生姜</option>
        <option value="b">桂枝</option>
      <option value="c" >阿胶</option>
      <option value="d">火麻仁</option>
      <option value="e">泽泻</option>
      <option value="c" >牡丹皮</option>
      <option value="d">枸杞子</option>
      <option value="e">菟丝子</option>
      <option value="c" >鹿角胶</option>
      <option value="d">牛膝</option>
      <option value="e">黄柏</option>
      <option value="c" >知母</option>
      <option value="d">北沙参</option>
      <option value="e">川楝子</option>
        <option value="e">山茱萸</option>
        <option value="d">附子</option>
      <option value="e">肉桂</option>
        <option value="b">杜仲</option>
      <option value="c" >肉苁蓉</option>
      <option value="d">巴戟天</option>
      <option value="e">石斛</option>
        <option value="b">薄荷</option>
      <option value="c" >莲子</option>
      <option value="d">砂仁</option>
      <option value="e">荆芥炭</option>
      <option value="c" >地黄</option>
      <option value="d">龟甲胶</option>
      <option value="e">龟甲</option>
      <option value="c" >石菖蒲</option>
      <option value="d">何首乌</option>
      <option value="e">补骨脂</option>
      <option value="c" >龙眼肉</option>
      <option value="d">酸枣仁</option>
      <option value="e">木香</option>
        <option value="d">远志</option>
      <option value="e">川芎</option>
    </select> 
    脾：
    <select name="liver" id="spleenSelect">
      <option value="a" >人参</option>
      <option value="b">白术</option>
      <option value="c" >茯苓</option>
      <option value="d">甘草</option>
      <option value="e">薏苡仁</option>
        <option value="b">桔梗</option>
      <option value="c" >白扁豆</option>
      <option value="d" selected="selected">山药</option>
      <option value="e">大枣</option>
      <option value="c" >黄芪</option>
      <option value="d">炙甘草</option>
      <option value="e">当归</option>
      <option value="c" >陈皮</option>
      <option value="d">升麻</option>
      <option value="e">柴胡</option>
      <option value="c" >防风</option>
      <option value="d">麦冬</option>
      <option value="e">五味子</option>
        <option value="b">白芍</option>
      <option value="c" >车前子</option>
      <option value="d">苍术</option>
      <option value="e">熟地黄</option>
        <option value="b">生姜</option>
        <option value="b">桂枝</option>
      <option value="c" >阿胶</option>
      <option value="d">火麻仁</option>
      <option value="e">泽泻</option>
      <option value="c" >牡丹皮</option>
      <option value="d">枸杞子</option>
      <option value="e">菟丝子</option>
      <option value="c" >鹿角胶</option>
      <option value="d">牛膝</option>
      <option value="e">黄柏</option>
      <option value="c" >知母</option>
      <option value="d">北沙参</option>
      <option value="e">川楝子</option>
        <option value="e">山茱萸</option>
        <option value="d">附子</option>
      <option value="e">肉桂</option>
        <option value="b">杜仲</option>
      <option value="c" >肉苁蓉</option>
      <option value="d">巴戟天</option>
      <option value="e">石斛</option>
        <option value="b">薄荷</option>
      <option value="c" >莲子</option>
      <option value="d">砂仁</option>
      <option value="e">荆芥炭</option>
      <option value="c" >地黄</option>
      <option value="d">龟甲胶</option>
      <option value="e">龟甲</option>
      <option value="c" >石菖蒲</option>
      <option value="d">何首乌</option>
      <option value="e">补骨脂</option>
      <option value="c" >龙眼肉</option>
      <option value="d">酸枣仁</option>
      <option value="e">木香</option>
        <option value="d">远志</option>
      <option value="e">川芎</option>
    </select> 
    肺：
    <select name="liver" id="lungSelect">
      <option value="a" selected="selected">人参</option>
      <option value="b">白术</option>
      <option value="c" >茯苓</option>
      <option value="d">甘草</option>
      <option value="e">薏苡仁</option>
        <option value="b">桔梗</option>
      <option value="c" >白扁豆</option>
      <option value="d">山药</option>
      <option value="e">大枣</option>
      <option value="c" >黄芪</option>
      <option value="d">炙甘草</option>
      <option value="e">当归</option>
      <option value="c" >陈皮</option>
      <option value="d">升麻</option>
      <option value="e">柴胡</option>
      <option value="c" >防风</option>
      <option value="d">麦冬</option>
      <option value="e">五味子</option>
        <option value="b">白芍</option>
      <option value="c" >车前子</option>
      <option value="d">苍术</option>
      <option value="e">熟地黄</option>
        <option value="b">生姜</option>
        <option value="b">桂枝</option>
      <option value="c" >阿胶</option>
      <option value="d">火麻仁</option>
      <option value="e">泽泻</option>
      <option value="c" >牡丹皮</option>
      <option value="d">枸杞子</option>
      <option value="e">菟丝子</option>
      <option value="c" >鹿角胶</option>
      <option value="d">牛膝</option>
      <option value="e">黄柏</option>
      <option value="c" >知母</option>
      <option value="d">北沙参</option>
      <option value="e">川楝子</option>
        <option value="e">山茱萸</option>
        <option value="d">附子</option>
      <option value="e">肉桂</option>
        <option value="b">杜仲</option>
      <option value="c" >肉苁蓉</option>
      <option value="d">巴戟天</option>
      <option value="e">石斛</option>
        <option value="b">薄荷</option>
      <option value="c" >莲子</option>
      <option value="d">砂仁</option>
      <option value="e">荆芥炭</option>
      <option value="c" >地黄</option>
      <option value="d">龟甲胶</option>
      <option value="e">龟甲</option>
      <option value="c" >石菖蒲</option>
      <option value="d">何首乌</option>
      <option value="e">补骨脂</option>
      <option value="c" >龙眼肉</option>
      <option value="d">酸枣仁</option>
      <option value="e">木香</option>
        <option value="d">远志</option>
      <option value="e">川芎</option>
    </select> 
    肾：
    <select name="liver" id="kidneySelect">
      <option value="a" >人参</option>
      <option value="b">白术</option>
      <option value="c" >茯苓</option>
      <option value="d">甘草</option>
      <option value="e">薏苡仁</option>
        <option value="b">桔梗</option>
      <option value="c" >白扁豆</option>
      <option value="d">山药</option>
      <option value="e">大枣</option>
      <option value="c" >黄芪</option>
      <option value="d">炙甘草</option>
      <option value="e">当归</option>
      <option value="c" >陈皮</option>
      <option value="d">升麻</option>
      <option value="e">柴胡</option>
      <option value="c" >防风</option>
      <option value="d">麦冬</option>
      <option value="e">五味子</option>
        <option value="b">白芍</option>
      <option value="c" >车前子</option>
      <option value="d">苍术</option>
      <option value="e">熟地黄</option>
        <option value="b">生姜</option>
        <option value="b">桂枝</option>
      <option value="c" >阿胶</option>
      <option value="d">火麻仁</option>
      <option value="e">泽泻</option>
      <option value="c" >牡丹皮</option>
      <option value="d">枸杞子</option>
      <option value="e">菟丝子</option>
      <option value="c" >鹿角胶</option>
      <option value="d">牛膝</option>
      <option value="e">黄柏</option>
      <option value="c" >知母</option>
      <option value="d">北沙参</option>
      <option value="e">川楝子</option>
        <option value="e">山茱萸</option>
        <option value="d">附子</option>
      <option value="e">肉桂</option>
        <option value="b">杜仲</option>
      <option value="c" selected="selected">肉苁蓉</option>
      <option value="d">巴戟天</option>
      <option value="e">石斛</option>
        <option value="b">薄荷</option>
      <option value="c" >莲子</option>
      <option value="d">砂仁</option>
      <option value="e">荆芥炭</option>
      <option value="c" >地黄</option>
      <option value="d">龟甲胶</option>
      <option value="e">龟甲</option>
      <option value="c" >石菖蒲</option>
      <option value="d">何首乌</option>
      <option value="e">补骨脂</option>
      <option value="c" >龙眼肉</option>
      <option value="d">酸枣仁</option>
      <option value="e">木香</option>
        <option value="d">远志</option>
      <option value="e">川芎</option>

    </select> 
    <button class="selectbutton" onclick="myFunction()">选择</button>
    <button class="selectbutton" onclick="clearFunction()">颜色图</button>
    <button class="selectbutton" onclick="realclearFunction()">清除</button>
  </p>
  </div>
    <div id="main"> 
      <div id="aside">
        <h2>补益剂药物视图</h2>
  
        <style>
  
        chart{
          font: 10px sans-serif;
        }

        #svg000{
          background-image:url("rbftest2.png");
          background-repeat:no-repeat;
          background-size:100% 100%;
          
          /* background-size:cover;  让背景图基于容器大小伸缩 */
          /* background-size:contain; */
      /* background-attachment:fixed; */

        }
        #svg001{
          background-image:none;/*加载背景图*/   /* 背景图不平铺 */

        }
        .axis path,
        .axis line {
          fill: none;
          stroke: #000;
          shape-rendering: crispEdges;
        }
        
        .dot {
          stroke: #000;
        }
        
        .lasso path {
          stroke: rgb(80,80,80);
          stroke-width:2px;
        }
        
        .lasso .drawn {
          fill-opacity:.05 ;
        }
        
        .lasso .loop_close {
          fill:none;
          stroke-dasharray: 4,4;
        }
        
        .lasso .origin {
          fill:#3399FF;
          fill-opacity:.5;
        }
        
        .not_possible {
          fill:rgb(200,200,200);
        }
        
        .possible {
          fill:#EC888C;
        }
        
        /* .text{
          fill:rgb(63, 13, 226);
        } */
        
        </style>
        <body>
        <script src="https://d3js.org/d3.v3.min.js"></script>
        <script src = "http://axc.net/code_libraries/lasso/lasso.min.js"></script>
        <div id="chart"></div>
        <script>
        var color = d3.scale.category20();
        
        
        
        
        // var margin = {top: 20, right: 20, bottom: 30, left: 40},
        //   width = 1060 - margin.left - margin.right,
        //   height = 700 - margin.top - margin.bottom;
        width = 1260
        height = 700
        
        var x = d3.scale.linear()
          .range([0, width]);
        
        var y = d3.scale.linear()
          .range([height, 0]);
        
        // var color = d3.scale.category10();
        
        var xAxis = d3.svg.axis()
          .scale(x)
          .orient("bottom");
        
        var yAxis = d3.svg.axis()
          .scale(y)
          .orient("left");
        
        
            var tArray = new Array();  //先声明一维
        for(var k=0;k<20;k++){    //一维长度为i,i为变量，可以根据实际情况改变
         
        tArray[k]=new Array();  //声明二维，每一个一维数组里面的一个元素都是一个数组；
         
        for(var j=0;j<20;j++){   //一维数组里面每个元素数组可以包含的数量p，p也是一个变量；
         
        tArray[k][j]="";    //这里将变量初始化，我这边统一初始化为空，后面在用所需的值覆盖里面的值
         }
        }
  
              tArray[0]= ['四君子汤★', '人参', '白术', '茯苓', '甘草', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '']
        tArray[1]= ['参苓白术散★', '人参', '白术', '茯苓', '莲子', '薏苡仁', '砂仁', '桔梗', '白扁豆', '甘草', '山药', '大枣', '', '', '', '', '', '', '', '']
        tArray[2]= ['补中益气汤★', '黄芪', '炙甘草', '人参', '当归', '陈皮', '升麻', '柴胡', '白术', '', '', '', '', '', '', '', '', '', '', '']
        tArray[3]= ['玉屏风散★', '黄芪', '防风', '白术', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '']
        tArray[4]= ['生脉散★', '人参', '麦冬', '五味子', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '']
        tArray[5]= ['完带汤★', '白术', '山药', '人参', '白芍', '车前子', '苍术', '甘草', '陈皮', '荆芥炭', '柴胡', '', '', '', '', '', '', '', '', '']
        tArray[6]= ['四物汤★', '熟地黄', '当归', '川芎', '白芍', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '']
        tArray[7]= ['当归补血汤★', '黄芪', '当归', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '']
        tArray[8]= ['归脾汤★', '黄芪', '龙眼肉', '白术', '茯神', '酸枣仁', '人参', '木香', '炙甘草', '当归', '远志', '', '', '', '', '', '', '', '', '']
        tArray[9]= ['八珍汤★', '人参', '熟地黄', '白术', '茯苓', '当归', '川芎', '白芍', '炙甘草', '生姜', '大枣', '', '', '', '', '', '', '', '', '']
        tArray[10]= ['炙甘草汤(复脉汤)★', '地黄', '炙甘草', '生姜', '人参', '桂枝', '阿胶', '麦冬', '火麻仁', '大枣', '', '', '', '', '', '', '', '', '', '']
        tArray[11]= ['六味地黄丸★', '熟地黄', '山茱萸', '山药', '泽泻', '牡丹皮', '茯苓', '', '', '', '', '', '', '', '', '', '', '', '', '']
        tArray[12]= ['左归丸', '熟地黄', '山药', '枸杞子', '山茱萸', '菟丝子', '鹿角胶', '龟甲胶', '牛膝', '', '', '', '', '', '', '', '', '', '', '']
        tArray[13]= ['大补阴丸★', '熟地黄', '龟甲', '黄柏', '知母', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '']
        tArray[14]= ['一贯煎★', '地黄', '北沙参', '麦冬', '当归', '枸杞子', '川楝子', '', '', '', '', '', '', '', '', '', '', '', '', '']
        tArray[15]= ['肾气丸★', '地黄', '山药', '山茱萸', '泽泻', '茯苓', '牡丹皮', '桂枝', '附子', '', '', '', '', '', '', '', '', '', '', '']
        tArray[16]= ['右归丸', '附子', '肉桂', '鹿角胶', '熟地黄', '山药', '山茱萸', '枸杞子', '菟丝子', '杜仲', '当归', '', '', '', '', '', '', '', '', '']
        tArray[17]= ['地黄饮子★', '熟地黄', '肉苁蓉', '巴戟天', '山茱萸', '石斛', '附子', '五味子', '肉桂', '茯苓', '麦冬', '石菖蒲', '远志', '生姜', '大枣', '薄荷', '', '', '', '']
        tArray[18]= ['龟鹿二仙胶★', '鹿角胶', '龟甲胶', '人参', '枸杞子', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '']
        tArray[19]= ['七宝美髯丹', '何首乌', '茯苓', '牛膝', '当归', '枸杞子', '菟丝子', '补骨脂', '', '', '', '', '', '', '', '', '', '', '', '']
              // console.log(tArray)
        
        
        
        var svg = d3.select("#chart").append("svg")
        .attr("width",1260)
        .attr("height", 700)
        //.attr('viewBox','0 0 1160 644.44')
        
        .attr("id","svg001")
          .append("g")
          // .attr("transform", "translate(" + margin.left + "," + margin.top + ")");
        
          var tipmargin = {top: 10, right: 30, bottom: 40, left: 50},
            tipwidth = 520 - tipmargin.left - tipmargin.right,
            tipheight = 520 - tipmargin.top - tipmargin.bottom;
        
          var tooltip = d3.select("#chart")
            .append("div")
            .style("opacity", 0)
            .attr("class", "tooltip")
            .style("background-color", "white")
            .style("border", "solid")
            .style("border-width", "2px")
            .style("width","1200px")
            .style("margin","5px 20px 5px 40px")
            .style("border-radius", "5px")
            .style("padding", "5px")
        // Lasso functions to execute while lassoing
        var lasso_start = function() {
          lasso.items()
          .attr("r",8) // reset size
          .style("fill",null) // clear all of the fills
          .classed({"not_possible":true,"selected":false}); // style as not possible
        };
        
        var lasso_draw = function() {
          // Style the possible dots
          lasso.items().filter(function(d) {return d.possible===true})
          .classed({"not_possible":false,"possible":true});
        
          // Style the not possible dot
          lasso.items().filter(function(d) {return d.possible===false})
          .classed({"not_possible":true,"possible":false});
        };
        
        
        
        
        var lasso_end = function() {
        
          // Reset the color of all dots
          lasso.items()
           .style("fill", function(d) { return d.rgb });
        
          // Style the selected dots
          lasso.items().filter(function(d) {return d.selected===true})
          .classed({"not_possible":false,"possible":false,"text":true})
          .attr("r",15);
        
        
          // Reset the style of the not selected dots
          lasso.items().filter(function(d) {return d.selected===false})
          .classed({"not_possible":false,"possible":false,"text":false})
          .attr("r",8);
        
        selectarray1=new Array();
        selectarray=new Array();
        selectarray1=d3.selectAll(".text")
        selectarray=selectarray1[0]
        // console.log(selectarray.length)
        
        // if(selectarray.length!=0)
        // {
        //   console.log(selectarray)
        //   console.log(selectarray[0].__data__.herb)
        // }
        
        fjarray=new Array();
        for( var i=0; i<selectarray.length; i++ )
          {
            fjarray[i]=selectarray[i].__data__.herb
          }
           //console.log(fjarray)
        
  
        
        newfj=new Array();
        function isContainArr(parent, child) {
          return child.every(item => {
          return parent.some(v => {
            return item == v
          })
          })
        }
        
        
        
          for( var i=0; i<20; i++ )
          {
            if(isContainArr(tArray[i], fjarray)==true&&fjarray.length!=0){
            newfj.push(tArray[i][0])
          }
          }
        console.log("newfj:"+newfj)
        tooltip
        .html("可能的方剂为: "+newfj)
        // .style("left", (d3.mouse(this)[0]+70) + "px")
        // .style("top", (d3.mouse(this)[1]) + "px")
        // d3.select(this)
        // .style("stroke", "none")
        .style("opacity", 1)
        re=[newfj,fjarray]
        //console.log(re)
        return re
        
        };
        
        // Create the area where the lasso event can be triggered
        var lasso_area = svg.append("rect")
                    .attr("width",width)
                    .attr("height",height)
                    .style("opacity",0);
        
        // Define the lasso
        var lasso = d3.lasso()
            .closePathDistance(75) // max distance for the lasso loop to be closed
            .closePathSelect(true) // can items be selected by closing the path?
            .hoverSelect(true) // can items by selected by hovering over them?
            .area(lasso_area) // area where the lasso can be started
            .on("start",lasso_start) // lasso start function
            .on("draw",lasso_draw) // lasso draw function
            .on("end",lasso_end); // lasso end function
        
        // Init the lasso on the svg:g that contains the dots
        svg.call(lasso);
        
        d3.csv("fangjidata0504.csv", function(error, data) {
          data.forEach(function(d) {
          d.yy = +d.yy;
          d.xx = +d.xx;
          });
        console.log(d3.extent(data, function(d) { return d.xx; }))
        console.log(d3.extent(data, function(d) { return d.yy; }))
          x.domain(d3.extent(data, function(d) { return d.xx; }));
          y.domain(d3.extent(data, function(d) { return d.yy; }));
          x.domain([-4.8,-1.1])
          y.domain([-5,2])
          // x.domain(d3.extent(data, function(d) { return d.xx; })).nice();
          //y.domain(d3.extent(data, function(d) { return d.yy; })).nice();
        
          // svg.append("g")
          //   .attr("class", "x axis")
          //   .attr("transform", "translate(0," + height + ")")
          //   .call(xAxis)
          // .append("text")
          //   .attr("class", "label")
          //   .attr("x", width)
          //   .attr("y", -6)
          //   .style("text-anchor", "end")
          //   .text("x");
        
          // svg.append("g")
          //   .attr("class", "y axis")
          //   .call(yAxis)
          // .append("text")
          //   .attr("class", "label")
          //   .attr("transform", "rotate(-90)")
          //   .attr("y", 6)
          //   .attr("dy", ".71em")
          //   .style("text-anchor", "end")
          //   .text("y")
        
          svg.selectAll(".dot")
            .data(data)
            .enter().append("circle")
            .attr("id",function(d,i) {return "dot_" + i;}) // added
            .attr("class", "dot")
            .attr("r", 8)
            // .attr("r", function(d) { return d.r; })
            .attr("cx", function(d) { return x(d.xx); })
            .attr("cy", function(d) { return y(d.yy); })
            .style("fill", function(d) { return d.rgb})
            .append("title")
            .text(function (d) { return d.properties});
        
            svg.append("g")
            .selectAll("dot")
            .data(data)
            .enter()
            .append('text')
            .attr("x", function (d) { return x(d.xx)+10 } )
            .attr("y", function (d) { return y(d.yy)+5 })
            .style('font-weight', 400)
            .style('font-size',15)
            .style('font-family', 'Arial')
            .style('fill', '#2c2c2c')
            .text(function (d) { return d.herb})
        
  
        
          lasso.items(d3.selectAll(".dot"));
        });


        </script>
        </body>
  
  
      
      </div>
  
      <div id="content">
      <h2>补益剂方剂视图</h2>
      <style>
  
        .node {
          fill: #ddd;
          /* stroke:red; */
          stroke:rgb(110,30,30);
        }
        
        .label {
          font: 15px sans-serif;
          text-anchor: middle;
          fill:#2c2c2c 
  
        }
        .fjlabel {
          font: 13px sans-serif;
          text-anchor: middle;
          font-style:oblique;
          fill:#727272
  
        }
        .fjlabel2 {
          font: 13px sans-serif;
          text-anchor: middle;
          font-style:oblique;
          fill:#727272

        }
  
        /* .highlight {
          opacity: 0;
          stroke:#3399FF
          
        } */
        
        </style>
  
  <div id="treechart"></div>
  <script src="https://unpkg.com/textures@1.2.0/dist/s.js"></script>
  <script>
  
  // var width = 960,
  //     height = 500;
  var treewidth = 990, treeheight = 600,labelhight=60
  //var treewidth = 990, treeheight = 800,
   x = d3.scale.linear().range([0, width]),
   y = d3.scale.linear().range([0, height]);
  
  var color = d3.scale.category20();
  // var color = d3.scaleLinear()
  //       .range(["white", "#69b3a2"])
  //       .domain([1,100])
  
  
  var svg0 = d3.select("#treechart").append("svg")
      .attr("width", treewidth)
      .attr("height", treeheight+100)
    .style("margin","0px 5px 0px 5px")
  
  var partition = d3.layout.partition()
      .sort(null)
      .size([treewidth, treeheight])
      .value(function(d) { return d.size; });
      //.value(function(d) { return d.size; });
  
    var partition1 = d3.layout.partition()
      .sort(null)
      .size([treewidth, labelhight])
      .value(function(d) { return d.size; });
  
    // var svg1 = d3.select("#treechart").append("svg")
    //   .attr("width", "990px")
    //     .attr("height", "80px")
    //       .style("margin","0px 5px 0px 5px")
  
      var tooltip2 = d3.select("#treechart")
          .append("div")
          .style("opacity", 0)
          .attr("class", "tooltip")
          .style("margin","5px 10px 5px 10px")
          .style("background-color", "white")
          .style("border", "solid")
          .style("border-width", "2px")
          .style("width","970px")
          .style("border-radius", "5px")
          .style("padding", "5px")
  
  
    var sel=d3.selectAll(".node")
    .style("stroke","rgb(0,47,167)")
  
      
      
  
      var mouseover = function(d) {
          tooltip2.style("opacity", 1)



          fjname=[]
            tooltipfj=d.fangji
            var n=tooltipfj.split("、");
            fjname=n
            // fjname.push([n])
            console.log(fjname)
            for(var i=0;i<fjname.length;i++)
            {
                for(var j=0;j<20;j++){
                  if (fjname[i]==tArray[j][0]) {
                    
                    for(var k=i;k<20;k++){
                       for (var a = 0; a < 58; a++) {
                      if(dotid[a].herb==tArray[j][k]){
                        
                        svg.select("#dot_"+a)
                       .attr("r",8)
                      }
                    }
                    }
                   
                    
                }
            }
          }




          d3.select(this)
        .style("stroke", "none")
        // .style("opacity", 1)
        .style("opacity", 0.75)
      }

        var mousemove = function(d) {
          tooltip2
            .html("可能的方剂为: " + d.fangji)
            .style("left", (d3.mouse(this)[0]+70) + "px")
            .style("top", (d3.mouse(this)[1]) + "px")
            console.log(this)
            fjname=[]
            tooltipfj=d.fangji
            var n=tooltipfj.split("、");
            console.log(n)
            fjname=n
            // for(var i=0;i<10;i++){
            //   fjname[i]=n
            // }
            // fjname.push([n])
            console.log(fjname)
            for(var i=0;i<fjname.length;i++)
            {
                for(var j=0;j<20;j++){
                  if (fjname[i]==tArray[j][0]) {
                    
                    for(var k=i;k<20;k++){
                       for (var a = 0; a < 58; a++) {
                      if(dotid[a].herb==tArray[j][k]){
                       
                        svg.select("#dot_"+a)
                       .attr("r",15)
                      }
                    }
                    }
                   
                    
                }
            }
          }
          

// console.log(tArray)
// console.log(ttArray)

            
//               for(var i=0;i<20;i++){
//                 for(var j=1;j<20;j++){
//                   if (d.name2==tArray[i][j]) {
//                   console.log(tArray[i][0])
// for (var ll = 0; ll < 58; ll++) {
//   if(dotid[ll].herb==tArray[i][j]){
//     console.log("hhhhhhhhhhhh")


//   }

// }   
//                 }
//                 }
//               }
 
                
              
            

            d3.select(this)
        .style("stroke", "none")
        .style("opacity", 1)  






        }
        var mouseleave = function(d) {
          tooltip2.style("opacity", 0)



          fjname=[]
            tooltipfj=d.fangji
            var n=tooltipfj.split("、");
            fjname=n
            
            for(var i=0;i<fjname.length;i++)
            {
                for(var j=0;j<20;j++){
                  if (fjname[i]==tArray[j][0]) {
                    
                    for(var k=i;k<20;k++){
                       for (var a = 0; a < 58; a++) {
                      if(dotid[a].herb==tArray[j][k]){
                        
                        svg.select("#dot_"+a)
                       .attr("r",8)
                      }
                    }
                    }
                   
                    
                }
            }
          }




          d3.select(this)
        .style("stroke", "none")
        // .style("opacity", 1)
        .style("opacity", 0.75)
        }
  
  
  
      var mouseover2 = function(d) {
          tooltip2.style("opacity", 1)
          d3.select(this)
        .style("stroke", "rgb(0,47,167)")
      .style("stroke-opacity",1)
        .style("opacity", 0.75)}
        
        var mousemove2 = function(d) {
          tooltip2
            .html("可能的方剂为: " + d.fangji)
            .style("left", (d3.mouse(this)[0]+70) + "px")
            .style("top", (d3.mouse(this)[1]) + "px")
            d3.select(this)
        .style("stroke", "rgb(0,47,167)")
      .style("stroke-opacity",1)
        .style("opacity", 1)  
        }
        var mouseleave2 = function(d) {
          tooltip2.style("opacity", 0)
          d3.select(this)
        .style("stroke", "rgb(0,47,167)")
      .style("stroke-opacity",1)
        .style("opacity", 0.75)
        }
  
      var mouseover3 = function(d) {
          tooltip2.style("opacity", 1)
          d3.select(this)
      .style("opacity", 0.75)
      .style("stroke", "red")
      .style("stroke-width", 2)
      .style("stroke-dasharray","3,5")
    }
        
        var mousemove3 = function(d) {
          tooltip2
            .html("可能的方剂为: " + d.fangji)
            .style("left", (d3.mouse(this)[0]+70) + "px")
            .style("top", (d3.mouse(this)[1]) + "px")
            d3.select(this)
        .style("opacity", 1)
        .style("stroke", "red")
        .style("stroke-width", 2)
        .style("stroke-dasharray","3,5")
        }
        var mouseleave3 = function(d) {
          tooltip2.style("opacity", 0)
          d3.select(this)
      .style("opacity", 0.75)
      .style("stroke", "red")
      .style("stroke-width", 2)
      .style("stroke-dasharray","3,5")
        }

        
  var ondiv=document.getElementById("aside");
   var treedata=
  {
	"name": "补益剂","name2": "补益剂","fangji": "生脉散★、四君子汤★、参苓白术散★、八珍汤★、当归补血汤★、玉屏风散★、补中益气汤★、归脾汤★、龟鹿二仙胶★、右归丸、一贯煎★、肾气丸★、炙甘草汤(复脉汤)★、七宝美髯丹、大补阴丸★、四物汤★、六味地黄丸★、左归丸、地黄饮子★、完带汤★", 
	"children": 
	[
	{"name": "人参","name2": "人参", "colour":"rgb(0,47,167)","fangji": "生脉散★、四君子汤★、参苓白术散★、八珍汤★", 
	"children":
		[
			{"name": " ","name2": "人参", "fangji": "生脉散★、四君子汤★", 
				"children":
				[
					
					{

				
				"name": " ","name2": "人参", "fangji": "生脉散★、四君子汤★", 
				"children":
			


				[
					{
				  "name": "五味子", "name2": "五味子", "fangji": "生脉散★", 
				  "children": 
								[
									{
										"name": "麦冬", "name2": "麦冬", "fangji": "生脉散★", "size": 1
									}
								]
					},
					{
						"name": "白术", "name2": "白术","fangji": "四君子汤★", 
						"children":
						[
							{
								"name": "茯苓", "name2": "茯苓","fangji": "四君子汤★", 
								"children": 
								[
									{
										"name": "甘草", "name2": "甘草", "fangji": "四君子汤★", "size": 1
									}
								]
							}
						]
					}
			
				]
				
			}
]



			},
			{"name": " ","name2": "人参", "fangji": "八珍汤★", 
				"children":

				[					
					{
						"name": "熟地黄","colour":"rgb(0,47,167)","name2": "熟地黄","fangji": "八珍汤★", 
						"children":
						[
							{
								"name": "白术","name2": "白术","fangji": "八珍汤★", 
								"children": 
								[
									{
										"name": "茯苓","name2": "茯苓", "fangji": "八珍汤★",
										"children":
										[
											{
												"name": "炙甘草","name2": "炙甘草","fangji": "八珍汤★",  
												"children":
												[
													{
														"name": "生姜","name2": "生姜","fangji": "八珍汤★",  
														"children":
														[
															{
																"name": "当归","name2": "当归","fangji": "八珍汤★",  
																"children":
																[
																	{
																		"name": "大枣","name2": "大枣","fangji": "八珍汤★",  
																		"children":[
																			{
																				"name": "白芍","name2": "白芍","fangji": "八珍汤★",
																				"children":[
																					{
																						"name": "川芎","name2": "川芎","fangji": "八珍汤★",   "size": 1	
																					}
																				]	
																			}
																		]
																	}
																]
															}
														]
													}
												]
											}
										]
									}
								]
							}
						]
					}
			
				]
			}
			,
			{"name": "茯苓", "colour":"rgb(0,47,167)","name2": "茯苓", "fangji": "参苓白术散★", 
				"children":
				[
				{
				"name": "白术", "colour":"rgb(0,47,167)","name2": "白术","fangji": "参苓白术散★", 
				"children":
				[					
					{
						"name": "砂仁","name2": "砂仁", "colour":"black","fangji": "参苓白术散★", 
						"children":
						[
							{
								"name": "莲子","name2": "莲子","fangji": "参苓白术散★", 
								"children": 
								[
									{
										"name": "甘草","name2": "甘草", "fangji": "参苓白术散★",
										"children":
										[
											{
												"name": "桔梗","name2": "桔梗","fangji": "参苓白术散★",  
												"children":
												[
													{
														"name": "山药","name2": "山药","fangji": "参苓白术散★",  
														"children":
														[
															{
																"name": "大枣","name2": "大枣","fangji": "参苓白术散★",  
																"children":
																[
																	{
																		"name": "薏苡仁","name2": "薏苡仁","fangji": "参苓白术散★",  
																		"children":[
																			{
																				"name": "白扁豆","name2": "白扁豆","fangji": "参苓白术散★",   "size": 1	
																			}
																		]
																	}
																]
															}
														]
													}
												]
											}
										]
									}
								]
							}
						]
					}
			
				]
				
			}
			


] 
			}

			

		] 
		
  	}
	  ,
	  {
		"name": "黄芪","name2": "黄芪", "colour":"rgb(0,47,167)","fangji": "补中益气汤★、玉屏风散★、当归补血汤★、归脾汤★",
  		"children": 
		  [
			{
				"name": " ","name2": "黄芪",  "fangji": "补中益气汤★、玉屏风散★、当归补血汤★",
				"children": 



		  [
			{
				"name": "当归","name2": "当归", "fangji": "当归补血汤★","size": 1
   			},
			{
				"name": "白术","name2": "白术","fangji": "补中益气汤★、玉屏风散★",
				"children": 
				[
					{
						"name": "防风","name2": "防风","fangji": "玉屏风散★","size": 1
					},
					{
						"name": "当归","name2": "当归","fangji": "补中益气汤★",
						"children": 
						[
							{
								"name": "升麻","name2": "升麻","fangji": "补中益气汤★",
								"children":
								[
									{
										"name": "人参","name2": "人参","fangji": "补中益气汤★",
										"children":
										[
											{
												"name": "陈皮","name2": "陈皮","fangji": "补中益气汤★",
												"children":
												[
													{
														"name": "柴胡","name2": "柴胡","fangji": "补中益气汤★",
														"children":
														[
															{
																"name": "炙甘草","name2": "炙甘草", "fangji": "补中益气汤★","size": 1
															}
														]
													}
												]
											}
										]
									}
								]
							}
						]
					}
					
					
				]
   			}
			   
			
			
		]
	},
	{
		"name": "龙眼肉","colour":"rgb(0,47,167)", "name2": "龙眼肉","fangji": "归脾汤★", 
		"children":
		[					
			{
				"name": "白术","name2": "白术","fangji": "归脾汤★", 
				"children":
				[
					{
						"name": "当归","name2": "当归","fangji": "归脾汤★", 
						"children": 
						[
							{
								"name": "炙甘草","name2": "炙甘草", "fangji": "归脾汤★",
								"children":
								[
									{
										"name": "人参","name2": "人参","fangji": "归脾汤★",  
										"children":
										[
											{
												"name": "远志","name2": "远志","fangji": "归脾汤★",  
												"children":
												[
													{
														"name": "酸枣仁","name2": "酸枣仁","fangji": "归脾汤★",  
														"children":
														[
															{
																"name": "木香","name2": "木香","fangji": "归脾汤★",   "size": 1	
																
															}
														]
													}
												]
											}
										]
									}
								]
							}
						]
					}
				]
			}
	
		]
		
	}
	]
 	}
   ,
	  {
		"name": "白术","name2": "白术","colour":"rgb(0,47,167)","fangji": "完带汤★",
		"children": 
		[
			{
				"name": "山药","name2": "山药","colour":"rgb(0,47,167)","fangji": "完带汤★",
				"children":
				[
					{
						"name": "苍术","name2": "苍术","fangji": "完带汤★",
						"children":
						[
							{
								"name": "荆芥炭","name2": "荆芥炭","fangji": "完带汤★",
								"children":
								[
									{
										"name": "甘草","name2": "甘草","fangji": "完带汤★",
										"children":
										[
													{
														"name": "人参","name2": "人参","fangji": "完带汤★", 
														"children":
														[
															{
																"name": "陈皮","name2": "陈皮","fangji": "完带汤★",
																"children":
																[
																	{
																		"name": "车前子","name2": "车前子","fangji": "完带汤★",
																		"children":
																		[
																			{
																				"name": "柴胡","name2": "柴胡","fangji": "完带汤★",
																				"children":
																				[
																					{
																						"name": "白芍","name2": "白芍","fangji": "完带汤★", "size": 1
																					
																					}
																				]
																			}
																		]
																	}
																]
															}
														]	
													}
												
											
										]
									}
								]
							}
						]
					}
				]
			}
		]
	}
	  ,	  
	 {
		"name": "地黄", "name2": "地黄","colour":"rgb(0,47,167)","fangji": "炙甘草汤(复脉汤)★、一贯煎★、肾气丸★",  
  		"children": 
		  [
			{
				"name": "麦冬","name2": "麦冬","fangji": "炙甘草汤(复脉汤)★、一贯煎★",  
				"children": 
				[
					


					{
						"name": "当归","name2": "当归","fangji": "一贯煎★",  
						"children": 	
						[
							{
								"name": "枸杞子","name2": "枸杞子","fangji": "一贯煎★",
								"children":
								[
									{
										"name": "北沙参","name2": "北沙参","fangji": "一贯煎★",
										"children":
										[
											{
												"name": "川楝子","name2": "川楝子","fangji": "一贯煎★","size": 1
											}
										]
									}
								]
							}
						]	
					}
					,
					{
						"name": "桂枝","name2": "桂枝","fangji": "炙甘草汤(复脉汤)★",  
						"children": 
						[
							{
								"name": "阿胶","name2": "阿胶","fangji": "炙甘草汤(复脉汤)★",  
								"children":
								[
									{
										"name": "火麻仁","name2": "火麻仁","fangji": "炙甘草汤(复脉汤)★",  
										"children":
										[
											{
												"name": "炙甘草","name2": "炙甘草","fangji": "炙甘草汤(复脉汤)★",  
												"children":
												[
													{
														"name": "大枣","name2": "大枣","fangji": "炙甘草汤(复脉汤)★",  
														"children":
														[
															{
																"name": "人参","name2": "人参","fangji": "炙甘草汤(复脉汤)★",  
																"children":[
																	{
																		"name": "生姜","name2": "生姜","fangji": "炙甘草汤(复脉汤)★",   "size": 1	
																	}
																]
															}
														]
													}
												]
											}
										]
									}
								]
							}
						]
					}
					
				]
   			}
			   
			,
			{
				"name": "泽泻","name2": "泽泻","fangji": "肾气丸★",
				"children": 
				[
					{
						"name":"桂枝", "name2": "桂枝","fangji": "肾气丸★",
						"children": 
						[
							{
								"name": "牡丹皮","name2": "牡丹皮","fangji": "肾气丸★",
								"children":
								[
									{
										"name": "山药","name2": "山药","fangji": "肾气丸★",
										"children":
										[
											{
												"name": "茯苓","name2": "茯苓","fangji": "肾气丸★",
												"children":
												[
													{
														"name": "附子","name2": "附子","fangji": "肾气丸★",
														"children":
														[
															{
																"name": "山茱萸","name2": "山茱萸", "fangji": "肾气丸★","size": 1	
															}
														]
													}
												]
											}
										]
									}
								]
							}
						]
					}
				]
   			}
		]
  	},
	  {
		"name": "何首乌","colour":"rgb(0,47,167)","name2": "何首乌","fangji": "七宝美髯丹",
		"children": 
		[
			{
				"name": "牛膝","name2": "牛膝","fangji": "七宝美髯丹",
				"children":
				[
					{
						"name": "当归","name2": "当归","fangji": "七宝美髯丹",
						"children":
						[
							{
								"name": "枸杞子","name2": "枸杞子","fangji": "七宝美髯丹",
								"children":
								[
									{
										"name": "菟丝子","name2": "菟丝子","fangji": "七宝美髯丹",
										"children":
										[
											{
												"name": "茯苓","name2": "茯苓","fangji": "七宝美髯丹",
												"children":[
													{
														"name": "补骨脂","name2": "补骨脂","fangji": "七宝美髯丹", "size": 1	
													}
												]
											}
										]
									}
								]
							}
						]
					}
				]
			}
		]
	} ,
	{
		"name": "熟地黄","name2": "熟地黄","colour":"rgb(0,47,167)", "fangji": "六味地黄丸★、左归丸、四物汤★、大补阴丸★、地黄饮子★",
		  "children": 
		  [
			  {
			"name": " ","name2": "熟地黄", "fangji": "四物汤★",
			"children": 
			[{
				"name": " ","name2": "熟地黄", "fangji": "四物汤★",
			"children":
			[{
				"name": " ","name2": "熟地黄", "fangji": "四物汤★",
			"children":
				[
					{
			"name": "当归","name2": "当归","fangji": "四物汤★",
			"children": 
			[
				{
					"name": "白芍","name2": "白芍","fangji": "四物汤★",
					"children": 
					[
						{
							"name": "川芎","name2": "川芎","fangji": "四物汤★","size": 1								
						}
					]
				}
			
				
				]}
				]}
				]}
					]
				},



			{
				"name": " ","name2": "熟地黄", "fangji": "六味地黄丸★、左归丸",
			"children": 
			[{
				"name": " ","name2": "熟地黄", "fangji": "六味地黄丸★、左归丸",
			"children":
			[{
				"name": " ","name2": "熟地黄", "fangji": "六味地黄丸★、左归丸",
			"children":
				[
					{
				"name": "山药","name2": "山药","fangji": "六味地黄丸★、左归丸",
				"children": 
				[
					{
						"name": "山茱萸","name2": "山茱萸","fangji": "六味地黄丸★、左归丸",
						"children": 
						[

							{
								"name": "牡丹皮", "name2": "牡丹皮","fangji": "六味地黄丸★",
								"children":
								[
									{
										"name": "泽泻","name2": "泽泻","fangji": "六味地黄丸★",
										"children":
										[
											{
												"name": "茯苓","name2": "茯苓","fangji": "六味地黄丸★", "size": 1
											}
										]
									}
								]
							}
							,
							{
							   "name": "龟甲胶","name2": "龟甲胶","fangji": "左归丸",
							   "children":
							   [
								   {
									   "name": "牛膝","name2": "牛膝","fangji": "左归丸",
									   "children":
									   [
										   {
											   "name": "菟丝子","name2": "菟丝子", "fangji": "左归丸",
											   "children":
											   [
												   {
													   "name": "枸杞子","name2": "枸杞子","fangji": "左归丸",
													   "children":
													   [
														   {
															   "name": "鹿角胶","name2": "鹿角胶","fangji": "左归丸", "size": 1	
														   }
													   ]
												   }
											   ]
										   }
									   ]
								   }
							   ]
						   }

						]
					}
					
				]

				}
				]}
				]}]

				
			   }	
			,
			{
				"name": " ","name2": "熟地黄", "fangji": "大补阴丸★",
				"children": 
				[{
					"name": " ","name2": "熟地黄", "fangji": "大补阴丸★",
				"children":
				[{
					"name": "龟甲","name2": "龟甲", "colour":"rgb(0,47,167)","fangji": "大补阴丸★",
				"children":
					[
						{
				"name": "黄柏","name2": "黄柏","fangji": "大补阴丸★",
				"children": 
				[
					{
						"name": "知母","name2": "知母","fangji": "大补阴丸★","size": 1
					}
				
					
					]}
					]}
					]}
						]
					}
					,
			{
				"name": "山茱萸","name2": "山茱萸","colour":"rgb(0,47,167)", "fangji": "地黄饮子★",
				"children": 
				[{
					"name": "肉苁蓉","name2": "肉苁蓉", "colour":"rgb(0,47,167)","fangji": "地黄饮子★",
				"children":
				[{
					"name": "巴戟天","name2": "巴戟天","colour":"rgb(0,47,167)", "fangji": "地黄饮子★",
				"children":
					[
						{
				"name": "石斛","name2": "石斛","fangji": "地黄饮子★",
				"children": 
				[
					{
						"name": "麦冬","name2": "麦冬","fangji": "地黄饮子★",
						"children":
						[
							{
								"name": "肉桂", "name2": "肉桂","fangji": "地黄饮子★",
								"children":
								[
									{
										"name": "附子","name2": "附子", "fangji": "地黄饮子★",
										"children":
										[
											{
												"name": "茯苓","name2": "茯苓","fangji": "地黄饮子★",
												"children":
												[
													{
														"name": "大枣","name2": "大枣","fangji": "地黄饮子★", 
														"children":
														[
															{
																"name": "五味子","name2": "五味子","fangji": "地黄饮子★",
																"children":
																[
																	{
																		"name": "远志","name2": "远志", "fangji": "地黄饮子★",
																		"children":
																		[
																			{
																				"name": "石菖蒲","name2": "石菖蒲","fangji": "地黄饮子★",
																				"children":
																				[
																					{
																						"name": "生姜","name2": "生姜","fangji": "地黄饮子★", 
																						"children":
																				[
																					{
																						"name": "薄荷","name2": "薄荷","fangji": "地黄饮子★", "size": 1	
																					}
																				]
																					}
																				]
																			}
																		]
																	}
																]
															}
														]
													}
												]
											}
										]
									}
								]
							}
						]
					}
				
					
					]}
					]}
					]}
			
			
			
						]
					}
			
		]
	  
  }
  ,
	  {
		"name": "鹿角胶","colour":"rgb(0,47,167)", "name2": "鹿角胶","fangji": "龟鹿二仙胶★、右归丸",
		  "children": 
		  [
			{
				
				"name": " ","name2": "鹿角胶","fangji": "龟鹿二仙胶★",
				"children":
				[
					{
						
						"name": "龟甲胶","colour":"rgb(0,47,167)","name2": "龟甲胶","fangji": "龟鹿二仙胶★",
						"children":

				[
					{
						"name": "人参","name2": "人参","fangji": "龟鹿二仙胶★",
						"children":
						[
							{
								"name": "枸杞子","name2": "枸杞子","fangji": "龟鹿二仙胶★", "size": 1
							}
						]
					}
				]
			}]
				
			}
							,
							{
							   "name": "肉桂", "colour":"rgb(0,47,167)","name2": "肉桂","fangji": "右归丸",
							   "children":
							   [
								   {
									   "name": "附子", "colour":"rgb(0,47,167)","name2": "附子","fangji": "右归丸",
									   "children":
									   [
										   {
											   "name": "当归","name2": "当归", "fangji": "右归丸",
											   "children":
											   [
												   {
													   "name": "枸杞子","name2": "枸杞子","fangji": "右归丸",
													   "children":
													   [
														   {
															   "name": "菟丝子","name2": "菟丝子","fangji": "右归丸", 
															   "children":
															   [
																   {
																	   "name": "山药","name2": "山药","fangji": "右归丸",
																	   "children":
																	   [
																		   {
																			   "name": "杜仲","name2": "杜仲", "fangji": "右归丸",
																			   "children":
																			   [
																				   {
																					   "name": "熟地黄","name2": "熟地黄","fangji": "右归丸",
																					   "children":
																					   [
																						   {
																							   "name": "山茱萸","name2": "山茱萸","fangji": "右归丸", "size": 1	
																						   }
																					   ]
																				   }
																			   ]
																		   }
																	   ]
																   }
															   ]
														   }
													   ]
												   }
											   ]
										   }
									   ]
								   }
							   ]
						   }

		]
	  }
]
}
  
  
  
    var nodes = partition.nodes(treedata);
    var links = partition.links(nodes)
    console.log(nodes)


    


    
  //   console.log("newfj:"+newfj)
  //   console.log(links)
    svg0.selectAll(".node")
        .data(nodes)
        .enter().append("rect")
      .attr("id",function(d,i) {return "rec_" + i;}) // added
        .on("mouseover", mouseover)
        .on("mousemove", mousemove)
        .on("mouseleave", mouseleave)
        .attr("class", "node")
        .attr("x", function(d) { return d.x; })
        .attr("y", function(d) { return d.y; })
        .attr("width", function(d) { return d.dx; })
        .attr("height", function(d) { return d.dy; }) 
        .style("fill", function(d) { return color(d.name2); })
        //.style("stroke-width", 4)
        .style("stroke", "none")
        .style("opacity", 0.75)
        //.style("opacity", 0.5)
  
      console.log(svg0.selectAll(".node"))
    
  
      hh=svg0.selectAll(".node")
      var recnode=hh.flat()
      //console.log(recnode)
      str=recnode[1].__data__. fangji
      var n=str.split("、");
      //console.log(n);
  
  
    svg0.selectAll(".label")
        .data(nodes.filter(function(d) { return d.dx > 6; }))
        .enter().append("text")
        .attr("class", "label")
        .attr("dy", ".35em")
        .style("fill", function(d) { return d.colour; })
        // .attr("transform", function(d) { return "translate(" + (d.x + d.dx / 2) + "," + (d.y + d.dy / 2) + ")rotate(90)"; })
        .attr("transform", function(d) { return "translate(" + (d.x + d.dx / 2) + "," + (d.y + d.dy / 2) + ")"; })
        .text(function(d) { return d.name; });
        
  
  
  
      var ttArray = new Array();  //先声明一维
        for(var k=0;k<nodes.length;k++){    //一维长度为i,i为变量，可以根据实际情况改变
         
        ttArray[k]=new Array();  //声明二维，每一个一维数组里面的一个元素都是一个数组；
         
        for(var j=0;j<20;j++){   //一维数组里面每个元素数组可以包含的数量p，p也是一个变量；
         
        ttArray[k][j]="";    //这里将变量初始化，我这边统一初始化为空，后面在用所需的值覆盖里面的值
         }
        }
    for(var k=0;k<nodes.length;k++){
        str=recnode[k].__data__. fangji
        var n=str.split("、");
        ttArray[k]=n
        
      }
    //console.log(ttArray)
    function isContainArr(parent, child) {
          return child.every(item => {
          return parent.some(v => {
            return item == v
          })
          })
        }
        var fjrecdata=[{fj:"生脉散★",fj1:"生脉散",fj2:""},{fj:"四君子汤★",fj1:"四君子",fj2:"汤"},{fj:'八珍汤★',fj1:"八珍汤",fj2:""},{fj:"参苓白术散★",fj1:"参苓白",fj2:"术散"},{fj:"当归补血汤★",fj1:"当归补",fj2:"血汤"},{fj:"玉屏风散★",fj1:"玉屏风",fj2:"散"},{fj:"补中益气汤★",fj1:"补中益",fj2:"气汤"},{fj:"归脾汤★",fj1:"归脾汤",fj2:""},{fj:"完带汤★",fj1:"完带汤",fj2:""},{fj:"一贯煎★",fj1:"一贯煎",fj2:""},{fj:"炙甘草汤(复脉汤)★",fj1:"炙甘草汤",fj2:"(复脉汤)"},{fj:'肾气丸★',fj1:"肾气丸",fj2:""},{fj:'七宝美髯丹',fj1:"七宝美",fj2:"髯丹"},{fj:'四物汤★',fj1:"四物汤",fj2:""},{fj:"六味地黄丸★",fj1:"六味地",fj2:"黄丸"},{fj:"左归丸",fj1:"左归丸",fj2:""},{fj:'大补阴丸★',fj1:"大补阴",fj2:"丸"},{fj:"地黄饮子★",fj1:"地黄饮",fj2:"子"},{fj:"龟鹿二仙胶★",fj1:"龟鹿二",fj2:"仙胶"},{fj:"右归丸",fj1:"右归丸",fj2:""}]
   fjy=[]
   fjindex=0
    for(var k=0;k<nodes.length;k++){
            if(nodes[k].size==1){
console.log(nodes[k].y)
fjy.push(nodes[k].y+50)
fjrecdata[fjindex].newy=(nodes[k].y+90)
fjindex=fjindex+1
      }

        }
  console.log(fjrecdata)
  svg0.selectAll(".fjnode")
        .data(fjrecdata)
        .enter().append("rect")
      .attr("id",function(d,i) {return "fjrec_" + i;}) // added
        .attr("class", "fjnode")
        .attr("x", function(d,i) { return i*treewidth/20; })
        .attr("y",function(d) { return (d.newy-30); })
        .attr("width", function(d) { return treewidth/20; })
        .attr("height", 50)
        .style("fill", "none")
      .style("stroke", "none")
      .style("stroke-width", 1)

      svg0.selectAll(".fjlabel")
      .data(fjrecdata)
        .enter().append("text")
        .attr("class", "fjlabel")
        .attr("dy", "0em")
        .attr("transform", function(d,i) { return "translate(" + (i*treewidth/20 + treewidth/40) + ","+(d.newy-10)+")"; })
      // .attr("transform", function(d,i) { return "translate(" + (i*treewidth/20 + treewidth/40) + ","+(d.newy+20)+")"; })
        .text(function(d) { return d.fj1; })

        svg0.selectAll(".fjlabel2")
      .data(fjrecdata)
        .enter().append("text")
        .attr("class", "fjlabel2")
        .attr("dy", "0.5em")
        .attr("transform", function(d,i) { return "translate(" + (i*treewidth/20 + treewidth/40) + ","+(d.newy)+")";})
      // .attr("transform", function(d,i) { return "translate(" + (i*treewidth/20 + treewidth/40) + ","+(d.newy+31)+")";})
        .text(function(d) { return d.fj2; })


  // svg1.selectAll(".fjnode")
  //       .data(fjrecdata)
  //       .enter().append("rect")
  //     .attr("id",function(d,i) {return "fjrec_" + i;}) // added
  //       .attr("class", "fjnode")
  //       .attr("x", function(d,i) { return i*treewidth/20; })
  //       .attr("y",30)
  //       .attr("width", function(d) { return treewidth/20; })
  //       .attr("height", 50)
  //       .style("fill", "none")
  //     .style("stroke", "blue")
  //     .style("stroke-width", 1)
  
  //     svg1.selectAll(".fjlabel")
  //     .data(fjrecdata)
  //       .enter().append("text")
  //       .attr("class", "fjlabel")
  //       .attr("dy", "0em")
  //   //   .attr("transform", function(d) { return "translate(" + (d.x + d.dx / 2) + "," + (d.y + d.dy / 2) + ")"; })
  //     .attr("transform", function(d,i) { return "translate(" + (i*treewidth/20 + treewidth/40) + ",52)"; })
  //       .text(function(d) { return d.fj1; })

  //       svg1.selectAll(".fjlabel2")
  //     .data(fjrecdata)
  //       .enter().append("text")
  //       .attr("class", "fjlabel2")
  //       .attr("dy", "0.5em")
  //   //   .attr("transform", function(d) { return "translate(" + (d.x + d.dx / 2) + "," + (d.y + d.dy / 2) + ")"; })
  //     .attr("transform", function(d,i) { return "translate(" + (i*treewidth/20 + treewidth/40) + ",63)"; })
  //       .text(function(d) { return d.fj2; })
  
      d3.csv("fangjidata0504.csv", function(error, data) { 
  function findrgb(k) {

  for(var i=0;i<data.length;i++){
  if(data[i].herb==recnode[k].__data__. name2){
  return data[i].rgb
  }
  }
  
}


      ondiv.onclick=function(){ 
          aaaa=lasso_end();
          aa=aaaa[1]
          bb=aaaa[0]
          console.log(aa)		
          svg0.selectAll(".node")
          .data(nodes)
          .on("mouseover", mouseover)
              .on("mousemove", mousemove)
              .on("mouseleave", mouseleave)
          .style("stroke", "none")



    for(var k=1;k<nodes.length;k++){
   console.log(findrgb(k))
    d3.select("#rec_"+k)
    .style("fill",function() { return findrgb(k)})
  }
  
          svg0.selectAll(".fjnode")
          .style("stroke","none")
          
          var num2=0
          for(var p=0;p<bb.length;p++){
            bbb=[bb[p]]
            for(var k=1;k<nodes.length;k++){
                if(isContainArr(ttArray[k], bbb)==true)
                {
                num2=num2+1
                for(var i=0;i<num2;i++){
                d3.select("#rec_"+k)
                .on("mouseover", mouseover3)
                .on("mousemove", mousemove3)
                .on("mouseleave", mouseleave3)
                .style("stroke", "rgb(110,30,30)")
                .style("stroke-width", 2)
                .style("stroke-dasharray","3,5")
              }
                }
            }
  
          }
    
          nodek=[]
          var num=0
          for(var p=0;p<aa.length;p++){
            for(var k=0;k<nodes.length;k++){
          if(recnode[k].__data__. name2==aa[p]){
            num=num+1;
            
            for(var i=0;i<num;i++){
              //nodek.push(nodes[k])
              d3.select("#rec_"+k)
              .on("mouseover", mouseover2)
                  .on("mousemove", mousemove2)
                  .on("mouseleave", mouseleave2)
              .style("stroke", "rgb(0,47,167)")
              .style("stroke-width", 2)
              .style("stroke-opacity",1)
              .style("stroke-dasharray","5,0")
              //.style("fill", t.url())
            }					
          }
        }
          }	
          
      var num3=0
      for(var p=0;p<bb.length;p++){
        bbb=bb[p]
        console.log(bbb)
        for(var k=0;k<fjrecdata.length;k++){
            if(bbb==fjrecdata[k].fj)
            {
            num3=num3+1
            for(var i=0;i<num3;i++){
            //svg1.call(tt)
            d3.select("#fjrec_"+k)
            .style("stroke", "rgb(110,30,30)")
            // .style("fill", "red")
          }
            }
        }
  
      }
  
  
        }
  
  // });
  


 
//   console.log(data)
//   function findrgb(k) {

//   for(var i=0;i<data.length;i++){
//   if(data[i].herb==recnode[k].__data__. name2){
//   console.log("i=",i,"k=",k)
//   return data[i].rgb
//   }
//   }
  
// }


  for(var k=1;k<nodes.length;k++){
   //console.log(findrgb(k))
    d3.select("#rec_"+k)
    .style("fill",function() { return findrgb(k)})
  }
  


  })
  
  
    
  
    
  
  
  
  
  </script>
  
  
      </div>
    </div>
  
    <div id="footer">
      <p>2022毕业设计项目</p>
    </div>
  </div>
  
  
  
  </body>
</html>